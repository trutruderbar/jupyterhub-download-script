nohup: ignoring input
[usage-portal] 啟動 PostgreSQL (docker compose)
time="2025-11-18T17:34:40+08:00" level=warning msg="Found orphan containers ([usage_monitoring-frontend-1 usage_monitoring-backend-1]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
 Container usage_monitoring-db-1  Running
[usage-portal] 安裝/更新 Python 套件
Requirement already satisfied: fastapi==0.111.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.111.0)
Requirement already satisfied: uvicorn==0.29.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (0.29.0)
Requirement already satisfied: SQLAlchemy==2.0.30 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 3)) (2.0.30)
Requirement already satisfied: psycopg2-binary==2.9.9 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 4)) (2.9.9)
Requirement already satisfied: python-multipart==0.0.9 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 5)) (0.0.9)
Requirement already satisfied: pydantic==2.7.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from pydantic[email]==2.7.1->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 6)) (2.7.1)
Requirement already satisfied: alembic==1.13.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 7)) (1.13.1)
Requirement already satisfied: Jinja2==3.1.4 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from -r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 8)) (3.1.4)
Requirement already satisfied: starlette<0.38.0,>=0.37.2 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.37.2)
Requirement already satisfied: typing-extensions>=4.8.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: fastapi-cli>=0.0.2 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.0.16)
Requirement already satisfied: httpx>=0.23.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.28.1)
Requirement already satisfied: ujson!=4.0.2,!=4.1.0,!=4.2.0,!=4.3.0,!=5.0.0,!=5.1.0,>=4.0.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (5.11.0)
Requirement already satisfied: orjson>=3.2.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (3.11.4)
Requirement already satisfied: email_validator>=2.0.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (2.3.0)
Requirement already satisfied: annotated-types>=0.4.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from pydantic==2.7.1->pydantic[email]==2.7.1->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.18.2 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from pydantic==2.7.1->pydantic[email]==2.7.1->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 6)) (2.18.2)
Requirement already satisfied: click>=7.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn==0.29.0->uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (8.3.1)
Requirement already satisfied: h11>=0.8 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn==0.29.0->uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: greenlet!=0.4.17 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from SQLAlchemy==2.0.30->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 3)) (3.2.4)
Requirement already satisfied: Mako in ./usage_monitoring/.venv/lib/python3.10/site-packages (from alembic==1.13.1->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 7)) (1.3.10)
Requirement already satisfied: MarkupSafe>=2.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from Jinja2==3.1.4->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 8)) (3.0.3)
Requirement already satisfied: httptools>=0.5.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (0.7.1)
Requirement already satisfied: python-dotenv>=0.13 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (1.2.1)
Requirement already satisfied: pyyaml>=5.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (6.0.3)
Requirement already satisfied: uvloop!=0.15.0,!=0.15.1,>=0.14.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (0.22.1)
Requirement already satisfied: watchfiles>=0.13 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (1.1.1)
Requirement already satisfied: websockets>=10.4 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from uvicorn[standard]==0.29.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 2)) (15.0.1)
Requirement already satisfied: anyio<5,>=3.4.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from starlette<0.38.0,>=0.37.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (4.11.0)
Requirement already satisfied: exceptiongroup>=1.0.2 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette<0.38.0,>=0.37.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (1.3.0)
Requirement already satisfied: idna>=2.8 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette<0.38.0,>=0.37.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (3.11)
Requirement already satisfied: sniffio>=1.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from anyio<5,>=3.4.0->starlette<0.38.0,>=0.37.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (1.3.1)
Requirement already satisfied: dnspython>=2.0.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from email_validator>=2.0.0->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (2.8.0)
Requirement already satisfied: typer>=0.15.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.20.0)
Requirement already satisfied: rich-toolkit>=0.14.8 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.15.1)
Requirement already satisfied: tomli>=2.0.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (2.3.0)
Requirement already satisfied: certifi in ./usage_monitoring/.venv/lib/python3.10/site-packages (from httpx>=0.23.0->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (2025.11.12)
Requirement already satisfied: httpcore==1.* in ./usage_monitoring/.venv/lib/python3.10/site-packages (from httpx>=0.23.0->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (1.0.9)
Requirement already satisfied: rich>=13.7.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from rich-toolkit>=0.14.8->fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (14.2.0)
Requirement already satisfied: markdown-it-py>=2.2.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from rich>=13.7.1->rich-toolkit>=0.14.8->fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (4.0.0)
Requirement already satisfied: pygments<3.0.0,>=2.13.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from rich>=13.7.1->rich-toolkit>=0.14.8->fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (2.19.2)
Requirement already satisfied: mdurl~=0.1 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from markdown-it-py>=2.2.0->rich>=13.7.1->rich-toolkit>=0.14.8->fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (0.1.2)
Requirement already satisfied: shellingham>=1.3.0 in ./usage_monitoring/.venv/lib/python3.10/site-packages (from typer>=0.15.1->fastapi-cli>=0.0.2->fastapi==0.111.0->-r /root/tony/install_jhub_oauth_local/usage_monitoring/backend/requirements.txt (line 1)) (1.5.4)
[usage-portal] 啟動 FastAPI 服務 (Ctrl+C 可結束)
/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/main.py:255: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/main.py:261: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("shutdown")
INFO:     Started server process [12157]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('0.0.0.0', 29781): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      INFO:     10.2.240.212:59574 - "GET / HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 411, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 69, in __call__
    return await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 976, in run
    result = context.run(func, *args)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/main.py", line 143, in index
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/templating.py", line 230, in TemplateResponse
    return _TemplateResponse(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/templating.py", line 40, in __init__
    content = template.render(context)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/templates/index.html", line 94, in top-level template code
    apiAuth: {{ login_api | tojson }},
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/filters.py", line 1714, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/utils.py", line 658, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/usr/local/lib/python3.10/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "/usr/local/lib/python3.10/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.10/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python3.10/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Undefined is not JSON serializable
INFO:     10.2.240.212:56401 - "GET / HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 411, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 69, in __call__
    return await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 976, in run
    result = context.run(func, *args)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/main.py", line 143, in index
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/templating.py", line 230, in TemplateResponse
    return _TemplateResponse(
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/starlette/templating.py", line 40, in __init__
    content = template.render(context)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/backend/app/templates/index.html", line 94, in top-level template code
    apiAuth: {{ login_api | tojson }},
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/filters.py", line 1714, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "/root/tony/install_jhub_oauth_local/usage_monitoring/.venv/lib/python3.10/site-packages/jinja2/utils.py", line 658, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/usr/local/lib/python3.10/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "/usr/local/lib/python3.10/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.10/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python3.10/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Undefined is not JSON serializable
