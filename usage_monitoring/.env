# FastAPI service defaults
APP_HOST=0.0.0.0
APP_PORT=29781
DATABASE_URL=postgresql+psycopg2://usage_app:usage_app@localhost:5433/usage_db

# PostgreSQL container (docker compose)
POSTGRES_USER=usage_app
POSTGRES_PASSWORD=usage_app
POSTGRES_DB=usage_db

# JupyterHub dashboard integration
KUBECTL_BIN="microk8s kubectl"
JHUB_NAMESPACE=jhub
# 設定後 /api/* 需要 Authorization: Bearer <token>
DASHBOARD_TOKEN="Z##*0@$%A-!+@&((^*A-$@)Z0*(z-Z"

# Portal login proxy (front-end login form會打到 /iam/command → 轉發到此 URL)
PORTAL_LOGIN_PROXY_TARGET=http://10.2.240.1:8000/command

# Auto recorder (PostgreSQL sessions)
AUTO_RECORD_ENABLED=true
AUTO_RECORD_INTERVAL=30

# MySQL pod_report sync
POD_REPORT_SYNC_ENABLED=true
POD_REPORT_SYNC_INTERVAL_SECONDS=1800
POD_REPORT_SYNC_DB_HOST=10.2.240.11
POD_REPORT_SYNC_DB_PORT=3306
POD_REPORT_SYNC_DB_USER=usagereportdb
POD_REPORT_SYNC_DB_PASSWORD=1@2Ma89t}yMz75kj
POD_REPORT_SYNC_DB_NAME=jupyterhub
POD_REPORT_SYNC_TABLE=pod_report
POD_REPORT_SYNC_NAMESPACE=jhub
# curl -X PATCH http://10.2.2.112:29781/users/tony.test   -H 'Content-Type: application/json'   -H 'Authorization: Bearer Z##*0@$%A-!+@&((^*A-$@)Z0*(z-Z'   -d '{"cpu_limit_cores":64,"memory_limit_gib":1536,"gpu_limit":8}'|jq